# 🚀 Habit Tracker - 專案開發進度與架構架構 (CONTEXT.md)

## � 專案概覽

這是一個結合「習慣養成」與「星寵蒐集/星球探索」主題的情境式 App。玩家透過完成任務獲得金幣，並解鎖不同屬性的星寵與神祕星球。

---

## 🛠 目前核心進展 (截至 2025-12-20)

### 1. 資料架構：邏輯與資料分離 (Data Separation)

為了保持程式碼整潔，所有「靜態資料」已從「邏輯組件」中分離，存放在 `src/data/`：

- **`src/data/aliensData.js`**：存放 12 筆星寵的詳細資料。
  - 包含：ID、屬性 (fire, water, grass, ice, ground)、名稱、簡介、棲息地、價格、稀有度、好感度、圖片路徑。
- **`src/data/planetsData.js`**：存放 6 顆星球的設定。
  - 包含：名稱、描述、解鎖條件、價格、屬性、圖片路徑。

### 2. 星寵圖鑑系統 (`AlienCollection.jsx`)

- **視覺設計**：
  - 背景採用 `collection-background-3.png`，設置為 `top` 對齊，並調整漸層透明度以露出清晰的背景星空。
  - 頂部金幣顯示與解鎖按鈕圖示統一改為 `icon-gold.png`。
- **動態邏輯**：
  - **屬性聯動**：圖鑑卡片左上角圖標會根據星寵屬性自動變更。
  - **屬性背景**：卡片背景色會隨屬性變化（如冰系為淡藍色、草系為淡綠色）。
- **UI 組件**：
  - 解鎖按鈕採用「奶綠色/橄欖綠」配色 (`#C7D9B2`)，具備 Hover、Active 縮放及暖黃色陰影效果。

### 3. 星球地圖頁面 (`PlanetMap.jsx`)

- **架構修復**：修復了因舊變數引用導致的白屏 (ReferenceError) 問題。
- **資料載入**：全面採用 `planetsData.js` 提供內容。
- **星球詳情**：
  - 加入屬性標籤、豐富的文學描述說明。
  - 解鎖按鈕會動態顯示該星球所需的解鎖金幣金額。
  - 軌跡線條會隨星球解鎖狀態變更光暈與顏色。

### 4. 其他 UI/UX 優化

- **`AchievementModal.jsx`**：修正背景圖片路徑（`.jpeg` 副檔名修正），恢復背景顯示。
- **字體與佈局**：全局採用現代字體與微動效，強化 Premium 質感。

---

## � 接下來的開發方向 (Next Steps)

1.  **全局金幣狀態管理**：實現金幣在不同頁面間的同步與扣除功能。
2.  **解鎖執行邏輯**：點擊解鎖按鈕後，判斷餘額並更新 `initialAliensData` 或 `planetsData` 的解鎖狀態。
3.  **地圖交互增強**：例如不同星球背景的切換，或星球與星寵的棲息地關連性引導。
4.  **各類任務系統連動**：將星球解鎖條件（如：完成 10 次任務）轉化為實際偵測代碼。

---

_本文件由 Antigravity 自動維護，作為跨會話開發的參考依據。_

Habit Tracker 專案進度報告
📌 專案概覽
這是一個結合 星際探索 與 寵物養成 元素的習慣追蹤應用程式。使用者透過達成每日習慣來獲取進度，進行寵物孵化並解鎖不同的星球地圖。

✅ 已完成功能 (Recent Milestones)

1. 🌌 星球地圖 (Planet Map) 增強
   展示模式 (Demo Mode)：實作了 Shift + S 快捷鍵，可立即解鎖地圖上所有星球及其路徑，便於報告展示。
   視覺修正：修正了展示模式下星球標籤、顏色及詳情頁面的亮起狀態，確保視覺統一。
   背景連動：在星球詳情點擊「開始探索」後，首頁的 Hero 區域會自動變換為對應星球的背景（如：水域、熔岩、冰原）。
2. 🥚 孵化與成就系統 (Incubation & Achievement)
   進度條視覺優化：優化了孵化過程的進度條，採用膠囊填充設計與顏色漸層。
   達成狀態 (Achievement Mode)：當寵物領養完成後，首頁進度條會轉為 「金色流光模式」，並顯示「今日星願已達成」的慶祝標語與獎盃圖標。
   數據持久化：所有的孵化狀態、背景選擇、已解鎖寵物均會儲存於 localStorage，確保重新整理後資料不遺失。
3. 🎨 UI/UX 優化
   防誤觸邏輯：修正了
   HabitCard
   的點擊判定，防止在側滑編輯/刪除時意外開啟詳情彈窗。
   素材更新：更新了
   MorePage
   的英雄圖與
   ShopPage
   的店長貓頭鷹圖片。
   自定義動畫：為金色進度條加入了 shimmer (流光) 動畫效果，提升視覺高級感。
   🛠 技術規格 (Tech Stack)
   前端框架: React
   樣式處理: Tailwind CSS (含自定義動畫與 Glassmorphism 磨砂玻璃效果)
   圖標庫: Lucide React
   資料儲存: LocalStorage API
   資源管理: 動態背景映射系統 (Planet-to-Background Mapping)
   📈 接下來的計畫 (Next Steps)
   習慣統計圖表：實作每週/每月的達成率趨勢圖。
   商店購買邏輯：串接金幣扣除與道具購買後的實際效果。
   更多星球場景：增加如「雷暴、森林、機械」等不同屬性的背景素材。
   音效系統：加入打勾、按鈕點擊與破蛋時的音效反饋。
   最後更新時間：2025-12-22
   當前狀態：核心循環（習慣 -> 孵化 -> 探索）已串接完成，UI 進入高級精緻化階段。

專案進度摘要 (2026-01-07)
✅ 已完成項目
功能 狀態
iPhone 16 Pro Max 佈局 採用 440x956 居中容器，移除所有擬真框架
破蛋動畫 mystery-egg-hatch-1.mp4 定位與時間流程修正
成就頁面 BottomNav 導航欄置頂可操作
成就頁面背景 填充淡紫色，消除底部空隙
📁 關鍵變更檔案
App.jsx

- 手機容器結構
  index.css
- 居中樣式
  BottomNav.jsx
- 定位調整
  AchievementModal.jsx
- z-index + 背景修正
  IncubatePage.jsx
- 動畫修正

### 📌 最新進度摘要 (2026-01-07 深夜修正)

#### ✅ 已修復與優化項目

| 功能                     | 狀態      | 說明                                                                          |
| :----------------------- | :-------- | :---------------------------------------------------------------------------- |
| **星球地圖 (PlanetMap)** | 🟢 已修復 | 解決 `App.jsx` 缺少 import 導致的點擊白屏問題。                               |
| **破蛋動畫**             | 🟢 已修正 | `mystery-egg-hatch-1.mp4` 改為居中定位，且限制於 440px 手機容器內播放。       |
| **底部導覽 (BottomNav)** | 🟢 已優化 | 高度增加 (`pb-10`) 以提升手感；修復「火箭」分頁在成就頁面時的選取高亮效果。   |
| **首頁佈局**             | 🟢 已優化 | 增加頂部邊距 (`pt-16`) 避開瀏海；增加日期區塊高度與底部間距，減輕視覺緊湊感。 |
| **成就任務頁面**         | 🟢 已優化 | 整體標題與進度條下移 (`pt-32`)，確保在不同手機容器下均有舒適的頂部間距。      |

#### 📁 關鍵變更檔案

- **`App.jsx`**: 添加 `PlanetMap` import。
- **`IncubatePage.jsx`**: 修正視頻容器定位與尺寸限制。
- **`BottomNav.jsx`**: 調整高度與選取狀態邏輯。
- **`Header.jsx`**: 調整內距與日期項高度，增加與 Hero 區塊的呼吸感。
- **`AchievementModal.jsx`**: 調整 Header Content 位置，解決靠近頂端的問題。

---

_本文件由 Antigravity 自動維護，作為跨會話開發的參考依據。_

這是目前專案進度的總結報告，我已將開發細節整理在
walkthrough.md
中，方便下次對話時能快速銜接（包含金幣、背景修復、卡片佈局優化等）。

🚀 專案進度總結 (Progress Report)

1. 核心功能與資料
   解鎖邏輯：已成功從組件提升至
   App.jsx
   全局管理，修復了彈窗模式下無法解鎖的問題。
   金幣初始值：初始金額已修正為 6000。
   重置功能：修復了除錯用的重置按鈕，確保開發測試順暢。
2. 圖鑑介面優化 (AlienCollection)
   背景斷層修復：背景現在會隨內容延伸且有無縫漸層過渡，解決了底部米黃色斷層問題。
   視覺精簡：隱藏了捲動軸浮標，並為底部導覽列添加了 Glassmorphism (磨砂玻璃) 效果。
3. 卡片展示精緻化 (AlienCard)
   佈局比例：大圖模式比例調整為 3:5，角色區佔比 2/3。
   角色展示：尺寸適度縮小，並大幅增加了頂部與底部的留白感，使角色不再擁擠並靠近底部陰影。
   資訊層級：名字右側不再堆疊星星（避免遮擋），改在下方新增獨立的「稀有度：」欄位呈現星級。

### 📌 最新進度摘要 (2026-01-11 綜合優化)

這是目前專案進度的總結報告，整合了最新的 UI 精緻化與邏輯修正，方便快速銜接。

#### ✅ 已完成核心優化

| 分類           | 功能項                     | 具體改動說明                                                                                                                                                                                                                                                                             |
| :------------- | :------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **卡片佈局**   | **精緻圖鑑卡 (AlienCard)** | 1. **三行資訊架構**：已解鎖卡片現在顯示「名稱」、「好感度：愛心」、「稀有度：星星」，標籤文字更清晰。<br>2. **比例微調**：已解鎖背景比例降至 **65%**，為三行標籤提供更多空間；角色位置保持穩定。<br>3. **擴展模式**：比例維持 **3:5**，角色區佔 **2/3**，增加大量留白以提升 Premium 感。 |
| **未解鎖卡片** | **剪影與鎖頭**             | 1. **比例調整**：背景比例設定為 **60%**。<br>2. **視覺置中**：剪影角色維持在背景正中央，增加平衡感。<br>3. **鎖頭增強**：鎖頭調整為 **5x5** 尺寸，確保在縮圖中清晰可見。                                                                                                                 |
| **數值與系統** | **金幣與重置**             | 1. **初始值設定**：調整為 **6000** 金幣，利於初期探索測試。<br>2. **重置邏輯修正**：修正 Debug 重置按鈕，現在會正確回復至 6000 金幣而非 0。                                                                                                                                              |
| **導覽介面**   | **視覺細節**               | 1. **圖鑑背景**：修復了背景延伸時的米黃色斷層，現在為無縫漸層過渡。<br>2. **磨砂玻璃**：底部導覽列 (BottomNav) 添加了 **Glassmorphism** 效果，提升現代感。                                                                                                                               |

#### 📁 關鍵變更檔案

- **`src/components/AlienCard.jsx`**: 核心佈局邏輯、條件式 Padding 與標籤文字渲染。
- **`src/App.jsx`**: 全局 `goldScore` 狀態、重置邏輯。
- **`src/components/AlienCollection.jsx`**: 列表間隔、背景漸層修復。

---

_本文件由 Antigravity 自動維護，作為跨會話開發的參考依據。_
